<html>
	<head>
		<script src="jquery-1.5.1.min.js"></script> 
		<script src="gamemodel.js"></script>
		<script src="PhiloGL.js"></script> 
		<script src="game.js"></script> 
		<script src="/socket.io/socket.io.js"></script> 

		<script id="shader-fs" type="x-shader/x-fragment"> 
		  #ifdef GL_ES
		  precision highp float;
		  #endif

			varying vec2 vTextureCoord;
		   uniform sampler2D uSampler;
		 
		  void main(void) {
		    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));		
		  }
		</script> 
		 
		<script id="shader-vs" type="x-shader/x-vertex"> 
		  attribute vec3 aVertexPosition;
		  attribute vec2 aTextureCoord;
		
		  uniform mat4 uMVMatrix;
		  uniform mat4 uPMatrix;

		  varying vec2 vTextureCoord;
		 
		  void main(void) {
		    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
			 vTextureCoord = aTextureCoord;
		  }
		</script>

	 <script type="text/javascript">
		$(document).ready(function(){
			$('#playing').hide();

		 var socket = new io.Socket(); 
		 socket.connect();
		 socket.on('connect', function(){

		 });
		 socket.on('message', function(data){
			switch(data.message)
			{
				case 'start':
					$('#waiting').hide();
					$('#zombied').hide();
					$('#playing').show();
					webGLStart();
				break;
            case "otherdisconnected":
					$('#zombied').show();
					$('#playing').hide();       
			   break;
			}	
		 });
		 socket.on('disconnect', function(){ 
				alert('You have been disconnected');
		 });

		$('#startGame').click(function(){
			$('#waiting').show();
			$('#zombied').hide();
			$('#playing').hide();
			socket.send({ message: 'startgame'});
		});

		});
	</script>

	</head>
	<body>		

		<div id="waiting">
			<p>Waiting for the game to start</p>
		</div>

		<div id="playing">
			<canvas id="game" style="border: none;" width="500" height="500">
			</canvas>
		</div>

		<div id="zombied">
			<p>The other player left the game, click <span id="startGame">here</span> to start a new game or close this window<p>
		</div>
	</body>
</html>
